<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Score Distribution Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.2.0"></script>
</head>
<body>
    <canvas id="scoreDistributionChart"></canvas>
    <script>
     document.addEventListener('DOMContentLoaded', function () {
    const ctx = document.getElementById('scoreDistributionChart').getContext('2d');
    const scoreData = {{ dataSet|json_encode|raw }};
    const meanValue = {{ mean }};

    const data = {
        datasets: [{
            label: 'Score Distribution',
            data: scoreData.map(data => ({ x: data.x, y: data.y })),
            backgroundColor: 'rgba(75, 192, 192, 0.5)',
            borderColor: 'rgb(75, 192, 192)',
            borderWidth: 1
        }]
    };

    const chart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: {
            scales: {
                x: {
                    type: 'linear',
                    position: 'bottom',
                    beginAtZero: true
                },
                y: {
                    beginAtZero: true
                }
            },
            plugins: {
                annotation: {
                    annotations: {
                        lineAtMean: {
                            type: 'line',
                            xMin: meanValue,
                            xMax: meanValue,
                            borderColor: 'red',
                            borderWidth: 2,
                            borderDash: [2, 2],
                            label: {
                                content: 'Mean',
                                enabled: true,
                                position: 'start'
                            }
                        },
                        fiftyFiftyLine: { // This is your new line at x = 50
                            type: 'line',
                            xMin: 50,
                            xMax: 50,
                            borderColor: 'blue', // Different color to distinguish
                            borderWidth: 2,
                            borderDash: [6, 2], // Different dash style
                            label: {
                                content: '50/50 Line',
                                enabled: true,
                                position: 'end'
                            }
                        }
                    }
                }
            }
        }
    });
});

    </script>
</body>
</html>
