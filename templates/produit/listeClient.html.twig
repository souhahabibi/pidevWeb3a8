{% extends 'client_base.html.twig' %}

{% block breadcrumb %}
<section class="breadcrumb-section set-bg mb-4" data-setbg="{{asset('clientSalle/img/about-breadcrumb-bg.jpg')}}">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="site-text">
                    <h2>{% block title %}OUR PRODUCTS{% endblock %}</h2>
                    <div class="site-breadcrumb">
                        <a href="./home.html" class="sb-item">Home</a>
                        <span class="sb-item">{% block page %}products{% endblock %}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block body %}
 {# Barre de recherche #}
    <form action="{{ path('search_produitClient') }}" method="GET" class="mt-3 mb-3">
        <div class="input-group">
            <input type="text" name="search_term" class="form-control" placeholder="Rechercher...">
            <div class="input-group-append">
                <button type="submit" class="btn btn-danger">Rechercher</button>
            </div>
        </div>
    </form>
    <form action="{{ path('produitsClient_liste') }}" method="GET">

    <div class="mb-3">
        <label for="tri" class="form-label">Trier par :</label>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="tri" id="triCout" value="cout" checked>
            <label class="form-check-label" for="triCout">
                Coût
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="tri" id="triDateExpiration" value="dateExpiration">
            <label class="form-check-label" for="triDateExpiration">
                Date d'expiration
            </label>
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Tri</button>
</form>

{% if produits is empty %}
    <p>Aucun produit trouvé.</p>
{% else %}
    <div class="row">
        {% for produit in produits %}
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card">
                    {% if produit.image %}
                        <img src="{{ asset('adminSalle/img/' ~ produit.image) }}" class="card-img-top" alt="Image du produit">
                    {% else %}
                        <div class="text-center">Pas d'image</div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title text-center">{{ produit.nom }}</h5>
    
                        <p class="card-text"><small class="text-muted">Description: {{ produit.description }}</small></p>
                        <p class="card-text"><small class="text-muted">Prix: {{ produit.cout }}</small></p>
                        <p class="card-text"><small class="text-muted">Date d'expiration: {{ produit.dateExpiration ? produit.dateExpiration|date('Y-m-d') : 'N/A' }}</small></p>
                        <div class="text-right">
                            <a href="#" class="btn btn-danger">Acheter</a>
                        </div>
                    </div>
                </div>
            </div>
            {% if loop.index % 3 == 0 %}</div><div class="row">{% endif %}
        {% endfor %}
    </div>
{% endif %}

{% endblock %}
